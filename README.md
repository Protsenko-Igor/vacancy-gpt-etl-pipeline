# üöÄ ETL Pipeline: –û–±–æ–≥–∞—â–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–π —Å –ø–æ–º–æ—â—å—é YandexGPT

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π ETL-–ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Apache Airflow –∏ YandexGPT.

## üìä –î–µ–º–æ-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
![–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](docs/screenshots/architecture.png)

## üéØ –ë–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á–∞
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π (15+ –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ñ–µ—Ä –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ —Ç—Ä—É–¥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Orchestration**: Apache Airflow
- **Cloud**: Yandex Cloud (Object Storage, YandexGPT API)
- **AI**: YandexGPT –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
- **Data Processing**: Pandas, Python 3.10+
- **Storage**: Yandex Object Storage (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
- **Visualization**: Yandex Datalens

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
vacancy-gpt-etl-pipeline/

‚îú‚îÄ‚îÄ dag/ # DAG —Ñ–∞–π–ª—ã Airflow

‚îÇ    ‚îî‚îÄ‚îÄ vacancy_pipeline_gpt_retry.py # –†–∞–±–æ—á–∏–π —Ñ–∞–π–ª

‚îú‚îÄ‚îÄ docs/ # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

‚îú‚îÄ‚îÄ config/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

‚îú‚îÄ‚îÄ data/ # –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö

‚îî‚îÄ‚îÄ requirements.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python

text

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```
### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Airflow –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
```
Yandex Object Storage
Connection ID: yandex_object_storage
Connection Type: HTTP
Host: storage.yandexcloud.net
Extra:
{
  "access_key_id": "–≤–∞—à_key_id",
  "secret_access_key": "–≤–∞—à_key"
```

### YandexGPT API
```
Connection ID: yandex_gpt
Connection Type: HTTP
Host: llm.api.cloud.yandex.net
Extra:
{
  "api_key": "–≤–∞—à_api_key",
  "folder_id": "–≤–∞—à_folder_id"
}
```

### 3. –ó–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞
```
bash
airflow dags trigger vacancy_pipline_gpt_rerty
```

üìà –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ —Å—Ñ–µ—Ä –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ GPT API
- **Retry –º–µ—Ö–∞–Ω–∏–∑–º:** –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º API
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** –î–∞—à–±–æ—Ä–¥—ã –≤ Yandex Datalens

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã
- **90%+ —É—Å–ø–µ—à–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤**
- **75%+ —É—Å–ø–µ—à–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ñ–µ—Ä –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ 500+ –≤–∞–∫–∞–Ω—Å–∏–π –≤ –¥–µ–Ω—å**
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å —á–∞—Å–æ–≤ –¥–æ –º–∏–Ω—É—Ç**
